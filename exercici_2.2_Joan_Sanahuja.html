<!-- Joan Sanahuja Solé - 04/10/22 - M06 
Exercici 2.2
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ca">

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Càlcul de temperatures mitjanes (Exercici 2.2)</title>
</head>

<body>
	<p><b><u>APLICACIÓ PEL CÀLCUL DE TEMPERATURES MITJANES</u></b></p>
	<b>a) Introudeix les dades de les temperatures en ºC:<br></b>
	<table>
		<tbody>
			<tr>
				<td>Mostra de Temperatura 1:</td>
				<td><input type="text" name="c[]" size="5" maxlength="6" value=0></td>
				<td>Mostra de Temperatura 2:</td>
				<td><input type="text" name="temp[]" size="5" maxlength="6" value=0></td>
			</tr>
			<tr>
				<td>Mostra de Temperatura 3:</td>
				<td><input type="text" name="temp[]" size="5" maxlength="6" value=0></td>
				<td>Mostra de Temperatura 4:</td>
				<td><input type="text" name="temp[]" size="5" maxlength="6" value=0></td>
			</tr>
			<tr>
				<td>Mostra de Temperatura 5:</td>
				<td><input type="text" name="temp[]" size="5" maxlength="6" value=0></td>
				<td>Mostra de Temperatura 6:</td>
				<td><input type="text" name="temp[]" size="5" maxlength="6" value=0></td>
			</tr>
			<tr>
				<td>Mostra de Temperatura 7:</td>
				<td><input type="text" name="temp[]" size="5" maxlength="6" value=0></td>
				<td>Mostra de Temperatura 8:</td>
				<td><input type="text" name="temp[]" size="5" maxlength="6" value=0></td>
			</tr>
		</tbody>
	</table>
	<br>
	<b>b) Escull les unitats de temperatura del resultat:</b><br>
	<input name="ut[]" value="celsius" type="checkbox" checked>Graus Celsius (ºC)<br>
	<input name="ut[]" value="fahrenheit" type="checkbox">Graus Fahrenheit (ºF)<br>
	<input name="ut[]" value="kelvins" type="checkbox">Kelvins (K)<br>
	<br>
	<button onclick='fCalcula()'>Calcula mitjanes</button>
	<button onclick='fNeteja()'>Neteja dades</button>
	<p><b>RESULTATS:</b></p>
	<p id="resultats"></p>
	<button onclick='fReinicia()'>Neteja resultats</button>
	<script>

		function fCalcula() {
			let llistaTemperatura = document.getElementsByName("temp[]");
			let seleccio = document.getElementsByName("ut[]");
			let total = "";
			for (let y = 0; y < seleccio.length; y++) {
				let tipus = seleccio[y].value;
				if (seleccio[y].checked) {
					if (tipus == "celsius") {
						total += `La mitjana de temperatura en ºC és de: ${(Mitjana(llistaTemperatura)).toFixed(1)}</br>`
					}
					else if (tipus == "fahrenheit") {
						total += `La mitjana de temperatura en ºF és de: ${(((9 * (Mitjana(llistaTemperatura))) / 5) + 32).toFixed(1)}</br>`
					}
					else if (tipus == "kelvins") {
						total += `La mitjana de temperatura en kelvin és de: ${(273 + (Mitjana(llistaTemperatura))).toFixed(1)}</br>`
					}
				}
			}
			document.getElementById("resultats").innerHTML = total;
		}

		function fNeteja() {
			let llistaTemperatura = document.getElementsByName("temp[]");
			for (let x = 0; x <= llistaTemperatura.length; x++) {
				document.getElementsByTagName("input")[x].value = "0";
			}

		}

		function fReinicia() {
			let total = "";
			document.getElementById("resultats").innerHTML = total;
		}

		function Mitjana(llistaTemperatura) {
			let sumaGraus = 0;
			for (let x = 0; x < llistaTemperatura.length; x++) {
				// graus = document.getElementsByTagName("input")[x].value;
				sumaGraus += parseInt(llistaTemperatura[x].value);
			}
			mitjana = sumaGraus / llistaTemperatura.length;
			return mitjana;
		}
	</script>
</body>

</html>